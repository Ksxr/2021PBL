{% extends 'moticom/base.html' %}

{% load i18n static %}

{% block content %}
    <body>
        <script src="{% static 'moticom/js/chart.js' %}"></script>
        <div class="container">
            <h2 class="mt-4 border-bottom">ダッシュボード</h2>
            <div style="width: 500px; height:400px">
                <canvas id="monthly" width="500px" height="400px"></canvas>
                    <script>
                        const label_list =  JSON.parse('{{ graph_date_list|safe }}')
                        const data_list = JSON.parse('{{ graph_data_list|safe }}')
                        var ctx = document.getElementById('monthly').getContext('2d');
                        var chart = new Chart(ctx, {
                        // The type of chart we want to create
                        type: 'line',
                        // The data for our dataset
                        data: {
                            labels: label_list,
                            datasets: [{
                                label: '',
                                backgroundColor: 'rgb(255, 99, 0)',
                                borderColor: 'rgb(255, 99, 132)',
                                data: data_list
                            }]
                        },
                        // Configuration options go here
                        options: {}
                    });
                    </script>
                
                
            </div>
            <h2 class="mt-2 border-bottom pb-2">新着投稿</h2>
            <div class="d-flex flex-column pt-3" style="background: rgb(150, 200, 200)">
                 {% if latest_report_list %}
                        {% for report in latest_report_list %}
                            <p class="ps-3 pb-3 mt-0 mb-0 small lh-sm border-bottom">
                                <strong class="d-block">@{{ report.user_id }}</strong>
                                {{ report.report_text }}
                            </p>
                        {% endfor %}
                {% else %}
                        <p class="pb-3 mb-0 small lh-sm border-bottom">
                            投稿がありません
                        </p>
                {% endif %}
            </div>
        </div>
    </body>
{% endblock content %}