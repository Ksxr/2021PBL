{% extends 'moticom/base.html' %}

{% load i18n static %}

{% block content %}
    <body>
        <div class="container">
            <div class="mt-4 pb-2">
                <h2 class="ps-2 float-start">投稿掲示板</h2>
                <div class="dropdown pe-2 float-end">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        ジャンル別表示
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <form action="{% url 'moticom:board' %}" method="get">
                            {% csrf_token %}
                                <input class="dropdown-item" type="submit" value="全て表示" style="border:none; background-color:transparent;">
                            </form>
                        {% for genre in genre_list %}
                            <form action="{% url 'moticom:genre_display' %}" method="get">
                            {% csrf_token %}
                                <input class="dropdown-item" type="hidden" name='genre_id' value="{{ genre.id }}">
                                <input class="dropdown-item" type="submit" value="{{ genre.genre_name }}" style="border:none; background-color:transparent;">
                            </form>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <hr class="mt-2 mb-2">
            <div class="d-flex flex-column pt-3">
                 {% if report_list %}
                        {% for report in report_list %}
                            <div class="card"  style="background: rgb(150, 200, 200)">
                                <p class="d-block ps-3 pb-1 mt-2 mb-0 small lh-sm border-bottom">
                                    <strong>@{{ report.user_id }}</strong>
                                    <p class="pt-2">{{ report.report_text }}</p>
                                    {% for comment in report.comment_set.all %}
                                        <p class="mt-1 mb-1">{{ comment.comment_text }} </p>
                                    {% endfor %}
                                </p>
                            </div>
                        {% endfor %}
                {% else %}
                        <p class="pb-3 mb-0 small lh-sm border-bottom">
                            投稿がありません
                        </p>
                {% endif %}
            </div>
        </div>
    </body>
{% endblock content %}